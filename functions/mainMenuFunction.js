import { User } from '../models/User.js'
import { sendMessageToAllAdmins } from '../functions/sendMessageToAllAdmins.js'
import {
	adminStartKeyboard,
	startKeyboard,
} from '../keyboards/startKeyboard.js'
import 'dotenv/config'
import addMenuCustomPagesToKeyboard from './addMenuCustomPagesToKeyboard.js'


export default async ctx => {
	const user = await User.findOne({ where: { tgId: ctx.from.id } })
	console.log(ctx.from)
	if (!user) {
		let fullname
		if (!ctx.from.last_name) {
			fullname = ctx.from.first_name
		} else if (!ctx.from.first_name) {
			fullname = null
		}
		const user = await User.create({
			tgId: ctx.from.id,
			username:
				ctx.from.username !== undefined ? `@${ctx.from.username}` : null,
			firstName: ctx.from.first_name !== undefined ? ctx.from.first_name : null,
			lastName: ctx.from.last_name !== undefined ? ctx.from.last_name : null,
			fullName: fullname,
		})
		const message_to_admin = `üÜï–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: <a href="https://t.me/${ctx.from.username}">${fullname}</a>
			üÜîUserID: <code>${ctx.from.id}</code>`
		await sendMessageToAllAdmins(ctx, message_to_admin)
		const startKeyboardWithCustomPages = await addMenuCustomPagesToKeyboard(startKeyboard)
		await ctx.reply(
			`–ü—Ä–∏–≤–µ—Ç, –∫—Ä–∞—Å–æ—Ç–∫–∞! üíï
–†–∞–¥–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–µ–±—è –≤ —Å–≤–æ–µ–º –±–æ—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤–æ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö:

- –∑–¥–µ—Å—å —Ç—ã —Å–º–æ–∂–µ—à—å –≤—Å—Ç—É–ø–∏—Ç—å –≤ –º–æ–π –∑–∞–∫—Ä—ã—Ç—ã–π –ø—Ä–æ–µ–∫—Ç Self Glow (–Ω–∞–∂–º–∏ –Ω–∞ —Ç–∞—Ä–∏—Ñ, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ç–æ–º, –∫–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞, –∑–∞–±–æ—Ç–∞ –∏ –ø–æ–º–æ—â—å –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞)

- –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –∞–≤—Ç–æ—Ä—Å–∫–∏–π —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏–π –µ–∂–µ–¥–Ω–µ–≤–Ω–∏–∫  Luckiest Girl, –∫–æ—Ç–æ—Ä—ã–π –±–µ—Ä–µ–∂–Ω–æ —Å–æ–∑–¥–∞–Ω –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å—Ç–∞—Ç—å —Ç–≤–æ–∏–º "–∫–∞—Ä–º–∞–Ω–Ω—ã–º –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º" (–Ω–∞–∂–º–∏ –Ω–∞ –Ω–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ)

- –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –∞–≤—Ç–æ—Ä—Å–∫–∏–π –µ–∂–µ–¥–Ω–µ–≤–Ω–∏–∫ –¥–ª—è –≤–µ–¥–µ–Ω–∏—è –¥–µ–ª Empire, –∫–æ—Ç–æ—Ä—ã–π –±–µ—Ä–µ–∂–Ω–æ —Å–æ–∑–¥–∞–Ω –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤—Å–µ —Ç–≤–æ–∏ —Ü–µ–ª–∏ –Ω–∞ –¥–µ–Ω—å/–Ω–µ–¥–µ–ª—é/–º–µ—Å—è—Ü —É—Å–ø–µ—à–Ω–æ –¥–æ—Å—Ç–∏–≥–∞–ª–∏—Å—å –∏ –±—ã–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã (–Ω–∞–∂–º–∏ –Ω–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ)

- –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã Pink Mood, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞–Ω—É—Ç –≤–µ—Ä–Ω—ã–º –ø–æ–º–æ—â–Ω–∏–∫–æ–º –≤ –æ—Ç–≤–µ—Ç–∞—Ö –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –∑–∞–¥–∞—Ç—É—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –Ω–∞—Å—Ç—Ä–æ–π –Ω–∞ —Ü–µ–ª—ã–π –¥–µ–Ω—å (–Ω–∞–∂–º–∏ –Ω–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ)

- –∞ —Ç–∞–∫–∂–µ:

- –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –∫–æ –º–Ω–µ –Ω–∞ –ª–∏—á–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é  (–Ω–∞–∂–º–∏ –Ω–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ)

- –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –∫–æ –º–Ω–µ –Ω–∞ –∫–æ—É—á - —Å–µ—Å—Å–∏—é  (–Ω–∞–∂–º–∏ –Ω–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ)

–ñ–µ–ª–∞—é —É–¥–∞—á–∏!

–ò –¥–æ –≤—Å—Ç—Ä–µ—á–∏ –≤ –º–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö!

–° –ª—é–±–æ–≤—å—é –∏ –∑–∞–±–æ—Ç–æ–π –æ —Ç–µ–±–µ, –°–æ—Ñ—å—è –ö–æ–Ω–æ–Ω–æ–≤–∞, –ø—Å–∏—Ö–æ–ª–æ–≥ –∏ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å Self Kindness Academy

–ß—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é —É—Å–ª—É–≥—É, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Ç–∞—Ä–∏—Ñ—ã üëáüèª

–û–ø–ª–∞—á–∏–≤–∞—è –ø–æ–¥–ø–∏—Å–∫—É –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –¥–æ–≥–æ–≤–æ—Ä–æ–º –æ—Ñ–µ—Ä—Ç—ã –∏ –¥–∞–µ—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.`,
			{
				reply_markup: startKeyboardWithCustomPages,
			}
		)
	} else {
		const startKeyboardWithCustomPages = await addMenuCustomPagesToKeyboard(startKeyboard)
		const adminStartKeyboardWithCustomPages = await addMenuCustomPagesToKeyboard(adminStartKeyboard)
		await ctx.reply(
			`–ü—Ä–∏–≤–µ—Ç, –∫—Ä–∞—Å–æ—Ç–∫–∞! üíï
–†–∞–¥–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–µ–±—è –≤ —Å–≤–æ–µ–º –±–æ—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤–æ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö:

- –∑–¥–µ—Å—å —Ç—ã —Å–º–æ–∂–µ—à—å –≤—Å—Ç—É–ø–∏—Ç—å –≤ –º–æ–π –∑–∞–∫—Ä—ã—Ç—ã–π –ø—Ä–æ–µ–∫—Ç Self Glow (–Ω–∞–∂–º–∏ –Ω–∞ —Ç–∞—Ä–∏—Ñ, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ç–æ–º, –∫–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞, –∑–∞–±–æ—Ç–∞ –∏ –ø–æ–º–æ—â—å –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞)

- –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –∞–≤—Ç–æ—Ä—Å–∫–∏–π —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏–π –µ–∂–µ–¥–Ω–µ–≤–Ω–∏–∫  Luckiest Girl, –∫–æ—Ç–æ—Ä—ã–π –±–µ—Ä–µ–∂–Ω–æ —Å–æ–∑–¥–∞–Ω –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å—Ç–∞—Ç—å —Ç–≤–æ–∏–º "–∫–∞—Ä–º–∞–Ω–Ω—ã–º –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º" (–Ω–∞–∂–º–∏ –Ω–∞ –Ω–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ)

- –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –∞–≤—Ç–æ—Ä—Å–∫–∏–π –µ–∂–µ–¥–Ω–µ–≤–Ω–∏–∫ –¥–ª—è –≤–µ–¥–µ–Ω–∏—è –¥–µ–ª Empire, –∫–æ—Ç–æ—Ä—ã–π –±–µ—Ä–µ–∂–Ω–æ —Å–æ–∑–¥–∞–Ω –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤—Å–µ —Ç–≤–æ–∏ —Ü–µ–ª–∏ –Ω–∞ –¥–µ–Ω—å/–Ω–µ–¥–µ–ª—é/–º–µ—Å—è—Ü —É—Å–ø–µ—à–Ω–æ –¥–æ—Å—Ç–∏–≥–∞–ª–∏—Å—å –∏ –±—ã–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã (–Ω–∞–∂–º–∏ –Ω–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ)

- –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã Pink Mood, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞–Ω—É—Ç –≤–µ—Ä–Ω—ã–º –ø–æ–º–æ—â–Ω–∏–∫–æ–º –≤ –æ—Ç–≤–µ—Ç–∞—Ö –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –∑–∞–¥–∞—Ç—É—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –Ω–∞—Å—Ç—Ä–æ–π –Ω–∞ —Ü–µ–ª—ã–π –¥–µ–Ω—å (–Ω–∞–∂–º–∏ –Ω–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ)

- –∞ —Ç–∞–∫–∂–µ:

- –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –∫–æ –º–Ω–µ –Ω–∞ –ª–∏—á–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é  (–Ω–∞–∂–º–∏ –Ω–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ)

- –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –∫–æ –º–Ω–µ –Ω–∞ –∫–æ—É—á - —Å–µ—Å—Å–∏—é  (–Ω–∞–∂–º–∏ –Ω–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ)

–ñ–µ–ª–∞—é —É–¥–∞—á–∏!

–ò –¥–æ –≤—Å—Ç—Ä–µ—á–∏ –≤ –º–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö!

–° –ª—é–±–æ–≤—å—é –∏ –∑–∞–±–æ—Ç–æ–π –æ —Ç–µ–±–µ, –°–æ—Ñ—å—è –ö–æ–Ω–æ–Ω–æ–≤–∞, –ø—Å–∏—Ö–æ–ª–æ–≥ –∏ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å Self Kindness Academy

–ß—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é —É—Å–ª—É–≥—É, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Ç–∞—Ä–∏—Ñ—ã üëáüèª

–û–ø–ª–∞—á–∏–≤–∞—è –ø–æ–¥–ø–∏—Å–∫—É –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –¥–æ–≥–æ–≤–æ—Ä–æ–º –æ—Ñ–µ—Ä—Ç—ã –∏ –¥–∞–µ—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.`,
			{
				reply_markup: user.isAdmin ? adminStartKeyboardWithCustomPages : startKeyboardWithCustomPages,
			}
		)
	}
}
